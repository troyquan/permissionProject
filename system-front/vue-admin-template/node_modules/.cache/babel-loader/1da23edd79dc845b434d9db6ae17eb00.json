{"remainingRequest":"C:\\Users\\troybaba\\Desktop\\permissionProject\\system-front\\vue-admin-template\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\troybaba\\Desktop\\permissionProject\\system-front\\vue-admin-template\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\troybaba\\Desktop\\permissionProject\\system-front\\vue-admin-template\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\troybaba\\Desktop\\permissionProject\\system-front\\vue-admin-template\\src\\views\\system\\sysUser\\list.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\troybaba\\Desktop\\permissionProject\\system-front\\vue-admin-template\\src\\views\\system\\sysUser\\list.vue","mtime":1681849059668},{"path":"C:\\Users\\troybaba\\Desktop\\permissionProject\\system-front\\vue-admin-template\\babel.config.js","mtime":1680926301273},{"path":"C:\\Users\\troybaba\\Desktop\\permissionProject\\system-front\\vue-admin-template\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1680926457384},{"path":"C:\\Users\\troybaba\\Desktop\\permissionProject\\system-front\\vue-admin-template\\node_modules\\babel-loader\\lib\\index.js","mtime":1680926458399},{"path":"C:\\Users\\troybaba\\Desktop\\permissionProject\\system-front\\vue-admin-template\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1680926457384},{"path":"C:\\Users\\troybaba\\Desktop\\permissionProject\\system-front\\vue-admin-template\\node_modules\\vue-loader\\lib\\index.js","mtime":1680926458823}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwLmpzIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCi8vaW1wb3J0IGN1c3RvbWl6ZWQganMKaW1wb3J0IGFwaSBmcm9tICdAL2FwaS9zeXN0ZW0vdXNlci5qcyc7CmltcG9ydCByb2xlQXBpIGZyb20gJ0AvYXBpL3N5c3RlbS9yb2xlLmpzJzsKZXhwb3J0IGRlZmF1bHQgewogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBsaXN0TG9hZGluZzogZmFsc2UsCiAgICAgIC8vbG9hZGluZyBpY29uCiAgICAgIGxpc3Q6IFtdLAogICAgICAvL3JvbGUgbGlzdAogICAgICB0b3RhbDogMCwKICAgICAgcGFnZTogMSwKICAgICAgbGltaXQ6IDEwLAogICAgICBzZWFyY2hPYmo6IHt9LAogICAgICBjcmVhdGVUaW1lczogW10sCiAgICAgIGRpYWxvZ1Zpc2libGU6IGZhbHNlLAogICAgICAvL2RpYWxvZyBkZWZhdWx0IGZhbHNlCgogICAgICBzeXNVc2VyOiB7fSwKICAgICAgLy/lsIHoo4Xmt7vliqDooajljZXmlbDmja4KICAgICAgLy8gc2VsZWN0VmFsdWU6IFtdLy9zZWxlY3Rpb24gZGF0YSBsaXN0CgogICAgICBkaWFsb2dSb2xlVmlzaWJsZTogZmFsc2UsCiAgICAgIGFsbFJvbGVzOiBbXSwKICAgICAgLy8g5omA5pyJ6KeS6Imy5YiX6KGoCiAgICAgIHVzZXJSb2xlSWRzOiBbXSwKICAgICAgLy8g55So5oi355qE6KeS6ImySUTnmoTliJfooagKICAgICAgaXNJbmRldGVybWluYXRlOiBmYWxzZSwKICAgICAgLy8g5piv5ZCm5piv5LiN56Gu5a6a55qECiAgICAgIGNoZWNrQWxsOiBmYWxzZSAvLyDmmK/lkKblhajpgIkKICAgIH07CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdGhpcy5mZXRjaERhdGEoKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIC8vY2hhbmdlIHVzZXIgc3RhdHVzCiAgICBzd2l0Y2hTdGF0dXM6IGZ1bmN0aW9uIHN3aXRjaFN0YXR1cyhyb3cpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgcm93LnN0YXR1cyA9IHJvdy5zdGF0dXMgPT09IDEgPyAwIDogMTsKICAgICAgYXBpLnVwZGF0ZVN0YXR1cyhyb3cuaWQsIHJvdy5zdGF0dXMpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgaWYgKHJlc3BvbnNlLmNvZGUpIHsKICAgICAgICAgIF90aGlzLiRtZXNzYWdlLnN1Y2Nlc3MocmVzcG9uc2UubWVzc2FnZSB8fCAnU3RhdHVzIFVwZGF0ZWQhJyk7CiAgICAgICAgICBfdGhpcy5mZXRjaERhdGEoKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIHJlbW92ZURhdGFCeUlkOiBmdW5jdGlvbiByZW1vdmVEYXRhQnlJZChpZCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKICAgICAgdGhpcy4kY29uZmlybSgnQ29uZmlybSBkZWxldGluZyBVc2VyPycsICdBbGVydCcsIHsKICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ1llcywgSSBjb25maXJtJywKICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAnQ2FuY2VsJywKICAgICAgICB0eXBlOiAnd2FybmluZycKICAgICAgfSkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgLy8gcHJvbWlzZQogICAgICAgIGNvbnNvbGUubG9nKGlkKTsKICAgICAgICBhcGkucmVtb3ZlSWQoaWQpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICBfdGhpczIuJG1lc3NhZ2UoewogICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsCiAgICAgICAgICAgIG1lc3NhZ2U6ICdEZWxldGVkIFN1Y2Nlc3NmdWxseSEnCiAgICAgICAgICB9KTsKICAgICAgICAgIF90aGlzMi5mZXRjaERhdGEoKTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9LAogICAgZWRpdDogZnVuY3Rpb24gZWRpdChpZCkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKICAgICAgdGhpcy5kaWFsb2dWaXNpYmxlID0gdHJ1ZTsKICAgICAgYXBpLmdldFVzZXJJZChpZCkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBfdGhpczMuc3lzVXNlciA9IHJlc3BvbnNlLmRhdGE7CiAgICAgIH0pOwogICAgfSwKICAgIC8vYWRkIG9yIHVwZGF0ZSB1c2VyCiAgICBzYXZlT3JVcGRhdGU6IGZ1bmN0aW9uIHNhdmVPclVwZGF0ZSgpIHsKICAgICAgaWYgKCF0aGlzLnN5c1VzZXIuaWQpIHsKICAgICAgICB0aGlzLnNhdmUoKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLnVwZGF0ZSgpOwogICAgICB9CiAgICB9LAogICAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUoKSB7CiAgICAgIHZhciBfdGhpczQgPSB0aGlzOwogICAgICBhcGkudXBkYXRlKHRoaXMuc3lzVXNlcikudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAvL+aPkOekugogICAgICAgIF90aGlzNC4kbWVzc2FnZS5zdWNjZXNzKCdTdWNjZXNzZnVsbHkgVXBkYXRlZCcpOwogICAgICAgIC8vY2xvc2UgZGlhbG9nCiAgICAgICAgX3RoaXM0LmRpYWxvZ1Zpc2libGUgPSBmYWxzZTsKICAgICAgICAvL3JlZnJlc2gKICAgICAgICBfdGhpczQuZmV0Y2hEYXRhKCk7CiAgICAgIH0pOwogICAgfSwKICAgIHNhdmU6IGZ1bmN0aW9uIHNhdmUoKSB7CiAgICAgIHZhciBfdGhpczUgPSB0aGlzOwogICAgICBhcGkuc2F2ZVVzZXIodGhpcy5zeXNVc2VyKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIC8v5o+Q56S6CiAgICAgICAgX3RoaXM1LiRtZXNzYWdlLnN1Y2Nlc3MoJ1N1Y2Nlc3NmdWxseSBBZGRlZCcpOwogICAgICAgIC8vY2xvc2UgZGlhbG9nCiAgICAgICAgX3RoaXM1LmRpYWxvZ1Zpc2libGUgPSBmYWxzZTsKICAgICAgICAvL3JlZnJlc2gKICAgICAgICBfdGhpczUuZmV0Y2hEYXRhKCk7CiAgICAgIH0pOwogICAgfSwKICAgIC8vYWRkIGRpYWxvZwogICAgYWRkOiBmdW5jdGlvbiBhZGQoKSB7CiAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9IHRydWU7CiAgICAgIHRoaXMuc3lzVXNlciA9IHt9OwogICAgfSwKICAgIC8vbGlzdAogICAgZmV0Y2hEYXRhOiBmdW5jdGlvbiBmZXRjaERhdGEoKSB7CiAgICAgIHZhciBfdGhpczYgPSB0aGlzOwogICAgICB2YXIgcGFnZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogMTsKICAgICAgdGhpcy5wYWdlID0gcGFnZTsKICAgICAgaWYgKHRoaXMuY3JlYXRlVGltZXMgIT0gJycgJiYgdGhpcy5jcmVhdGVUaW1lcy5sZW5ndGggPT0gMikgewogICAgICAgIHRoaXMuc2VhcmNoT2JqLmNyZWF0ZVRpbWVCZWdpbiA9IHRoaXMuY3JlYXRlVGltZXNbMF07CiAgICAgICAgdGhpcy5zZWFyY2hPYmouY3JlYXRlVGltZUVuZCA9IHRoaXMuY3JlYXRlVGltZXNbMV07CiAgICAgIH0KICAgICAgYXBpLmdldFBhZ2VMaXN0KHRoaXMucGFnZSwgdGhpcy5saW1pdCwgdGhpcy5zZWFyY2hPYmopLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgX3RoaXM2Lmxpc3QgPSByZXNwb25zZS5kYXRhLnJlY29yZHM7CiAgICAgICAgX3RoaXM2LnRvdGFsID0gcmVzcG9uc2UuZGF0YS50b3RhbDsKICAgICAgfSk7CiAgICB9LAogICAgcmVzZXREYXRhOiBmdW5jdGlvbiByZXNldERhdGEoKSB7CiAgICAgIGNvbnNvbGUubG9nKCdSZXNldCBGb3JtJyk7CiAgICAgIHRoaXMuc2VhcmNoT2JqID0ge307CiAgICAgIHRoaXMuY3JlYXRlVGltZXMgPSBbXTsKICAgICAgdGhpcy5mZXRjaERhdGEoKTsKICAgIH0sCiAgICAvL+WxleekuuWIhumFjeinkuiJsgogICAgc2hvd0Fzc2lnblJvbGU6IGZ1bmN0aW9uIHNob3dBc3NpZ25Sb2xlKHJvdykgewogICAgICB2YXIgX3RoaXM3ID0gdGhpczsKICAgICAgdGhpcy5zeXNVc2VyID0gcm93OwogICAgICB0aGlzLmRpYWxvZ1JvbGVWaXNpYmxlID0gdHJ1ZTsKICAgICAgcm9sZUFwaS5nZXRSb2xlc0J5VXNlcklkKHJvdy5pZCkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBfdGhpczcuYWxsUm9sZXMgPSByZXNwb25zZS5kYXRhLmFsbFJvbGVzOwogICAgICAgIF90aGlzNy51c2VyUm9sZUlkcyA9IHJlc3BvbnNlLmRhdGEudXNlclJvbGVJZHM7CiAgICAgICAgX3RoaXM3LmNoZWNrQWxsID0gX3RoaXM3LnVzZXJSb2xlSWRzLmxlbmd0aCA9PT0gX3RoaXM3LmFsbFJvbGVzLmxlbmd0aDsKICAgICAgICBfdGhpczcuaXNJbmRldGVybWluYXRlID0gX3RoaXM3LnVzZXJSb2xlSWRzLmxlbmd0aCA+IDAgJiYgX3RoaXM3LnVzZXJSb2xlSWRzLmxlbmd0aCA8IF90aGlzNy5hbGxSb2xlcy5sZW5ndGg7CiAgICAgIH0pOwogICAgfSwKICAgIC8qDQogICAg5YWo6YCJ5Yu+6YCJ54q25oCB5Y+R55Sf5pS55Y+Y55qE55uR5ZCsDQogICAgKi8KICAgIGhhbmRsZUNoZWNrQWxsQ2hhbmdlOiBmdW5jdGlvbiBoYW5kbGVDaGVja0FsbENoYW5nZSh2YWx1ZSkgewogICAgICAvLyB2YWx1ZSDlvZPliY3li77pgInnirbmgIF0cnVlL2ZhbHNlCiAgICAgIC8vIOWmguaenOW9k+WJjeWFqOmAiSwgdXNlclJvbGVJZHPlsLHmmK/miYDmnInop5LoibJpZOeahOaVsOe7hCwg5ZCm5YiZ5piv56m65pWw57uECiAgICAgIHRoaXMudXNlclJvbGVJZHMgPSB2YWx1ZSA/IHRoaXMuYWxsUm9sZXMubWFwKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgcmV0dXJuIGl0ZW0uaWQ7CiAgICAgIH0pIDogW107CiAgICAgIC8vIOWmguaenOW9k+WJjeS4jeaYr+WFqOmAieS5n+S4jeWFqOS4jemAieaXtiwg5oyH5a6a5Li6ZmFsc2UKICAgICAgdGhpcy5pc0luZGV0ZXJtaW5hdGUgPSBmYWxzZTsKICAgIH0sCiAgICAvKg0KICAgIOinkuiJsuWIl+ihqOmAieS4remhueWPkeeUn+aUueWPmOeahOebkeWQrA0KICAgICovCiAgICBoYW5kbGVDaGVja2VkQ2hhbmdlOiBmdW5jdGlvbiBoYW5kbGVDaGVja2VkQ2hhbmdlKHZhbHVlKSB7CiAgICAgIHZhciB1c2VyUm9sZUlkcyA9IHRoaXMudXNlclJvbGVJZHMsCiAgICAgICAgYWxsUm9sZXMgPSB0aGlzLmFsbFJvbGVzOwogICAgICB0aGlzLmNoZWNrQWxsID0gdXNlclJvbGVJZHMubGVuZ3RoID09PSBhbGxSb2xlcy5sZW5ndGggJiYgYWxsUm9sZXMubGVuZ3RoID4gMDsKICAgICAgdGhpcy5pc0luZGV0ZXJtaW5hdGUgPSB1c2VyUm9sZUlkcy5sZW5ndGggPiAwICYmIHVzZXJSb2xlSWRzLmxlbmd0aCA8IGFsbFJvbGVzLmxlbmd0aDsKICAgIH0sCiAgICAvL+WIhumFjeinkuiJsgogICAgYXNzaWduUm9sZTogZnVuY3Rpb24gYXNzaWduUm9sZSgpIHsKICAgICAgdmFyIF90aGlzOCA9IHRoaXM7CiAgICAgIHZhciBhc3NnaW5Sb2xlVm8gPSB7CiAgICAgICAgdXNlcklkOiB0aGlzLnN5c1VzZXIuaWQsCiAgICAgICAgcm9sZUlkTGlzdDogdGhpcy51c2VyUm9sZUlkcwogICAgICB9OwogICAgICByb2xlQXBpLmFzc2lnblJvbGVzKGFzc2dpblJvbGVWbykudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBfdGhpczguJG1lc3NhZ2Uuc3VjY2VzcyhyZXNwb25zZS5tZXNzYWdlIHx8ICfliIbphY3op5LoibLmiJDlip8nKTsKICAgICAgICBfdGhpczguZGlhbG9nUm9sZVZpc2libGUgPSBmYWxzZTsKICAgICAgICBfdGhpczguZmV0Y2hEYXRhKF90aGlzOC5wYWdlKTsKICAgICAgfSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"names":["api","roleApi","data","listLoading","list","total","page","limit","searchObj","createTimes","dialogVisible","sysUser","dialogRoleVisible","allRoles","userRoleIds","isIndeterminate","checkAll","created","fetchData","methods","switchStatus","row","_this","status","updateStatus","id","then","response","code","$message","success","message","removeDataById","_this2","$confirm","confirmButtonText","cancelButtonText","type","console","log","removeId","edit","_this3","getUserId","saveOrUpdate","save","update","_this4","_this5","saveUser","add","_this6","arguments","length","undefined","createTimeBegin","createTimeEnd","getPageList","records","resetData","showAssignRole","_this7","getRolesByUserId","handleCheckAllChange","value","map","item","handleCheckedChange","assignRole","_this8","assginRoleVo","userId","roleIdList","assignRoles"],"sources":["src/views/system/sysUser/list.vue"],"sourcesContent":["<template>\r\n  <div id=\"app-container\">\r\n    <div class=\"search-div\">\r\n      <el-form label-width=\"70px\" size=\"small\">\r\n        <el-row>\r\n          <el-col :span=\"8\">\r\n            <el-form-item label=\"Keywrod\">\r\n              <el-input style=\"width: 95%\" v-model=\"searchObj.keyword\" placeholder=\"Username/Name/Phone\"></el-input>\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-col :span=\"8\">\r\n            <el-form-item label=\"Time\">\r\n              <el-date-picker v-model=\"createTimes\" type=\"datetimerange\" range-separator=\"To\"\r\n                start-placeholder=\"Start Time\" end-placeholder=\"End Time\" value-format=\"yyyy-MM-dd HH:mm:ss\"\r\n                style=\"margin-right: 20px;width: 100%;\" />\r\n            </el-form-item>\r\n          </el-col>\r\n        </el-row>\r\n        <el-row style=\"display:flex\">\r\n          <el-button type=\"primary\" icon=\"el-icon-search\" size=\"mini\" @click=\"fetchData()\">Search</el-button>\r\n          <el-button icon=\"el-icon-refresh\" size=\"mini\" @click=\"resetData\">Reset</el-button>\r\n        </el-row>\r\n      </el-form>\r\n    </div>\r\n\r\n    <el-dialog title=\"AssignRole\" :visible.sync=\"dialogRoleVisible\">\r\n      <el-form label-width=\"100px\">\r\n        <el-form-item label=\"UserName\">\r\n          <el-input disabled :value=\"sysUser.username\"></el-input>\r\n        </el-form-item>\r\n\r\n        <el-form-item label=\"Role List\">\r\n          <el-checkbox :indeterminate=\"isIndeterminate\" v-model=\"checkAll\" @change=\"handleCheckAllChange\">SelectAll</el-checkbox>\r\n          <div style=\"margin: 15px 0;\"></div>\r\n          <el-checkbox-group v-model=\"userRoleIds\" @change=\"handleCheckedChange\">\r\n            <el-checkbox v-for=\"role in allRoles\" :key=\"role.id\" :label=\"role.id\">{{role.roleName}}</el-checkbox>\r\n          </el-checkbox-group>\r\n        </el-form-item>\r\n      </el-form>\r\n      <div slot=\"footer\">\r\n        <el-button type=\"primary\" @click=\"assignRole\" size=\"small\">Save</el-button>\r\n        <el-button @click=\"dialogRoleVisible = false\" size=\"small\">Canacel</el-button>\r\n      </div>\r\n    </el-dialog>\r\n    <!-- 工具条 -->\r\n    <div class=\"tools-div\">\r\n      <el-button type=\"success\" icon=\"el-icon-plus\" size=\"mini\" @click=\"add\">Add</el-button>\r\n    </div>\r\n\r\n    <!-- 列表 -->\r\n    <el-table v-loading=\"listLoading\" :data=\"list\" stripe border style=\"width: 100%;margin-top: 10px;\">\r\n\r\n      <el-table-column label=\"Index\" width=\"70\" align=\"center\">\r\n        <template slot-scope=\"scope\">\r\n          {{ (page - 1) * limit + scope.$index + 1 }}\r\n        </template>\r\n      </el-table-column>\r\n\r\n      <el-table-column prop=\"username\" label=\"User Name\" width=\"180\" />\r\n      <el-table-column prop=\"name\" label=\"Name\" width=\"110\" />\r\n      <el-table-column prop=\"phone\" label=\"Phone Num\" />\r\n      <el-table-column label=\"Status\" width=\"80\">\r\n        <template slot-scope=\"scope\">\r\n          <el-switch v-model=\"scope.row.status === 1\" @change=\"switchStatus(scope.row)\">\r\n          </el-switch>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column prop=\"createTime\" label=\"createTime\" />\r\n\r\n      <el-table-column label=\"Action\" align=\"center\" fixed=\"right\">\r\n        <template slot-scope=\"scope\">\r\n          <el-button type=\"primary\" icon=\"el-icon-edit\" size=\"mini\" @click=\"edit(scope.row.id)\" title=\"Edit\" />\r\n          <el-button type=\"danger\" icon=\"el-icon-delete\" size=\"mini\" @click=\"removeDataById(scope.row.id)\"\r\n            title=\"Delete\" />\r\n          <el-button type=\"warning\" icon=\"el-icon-baseball\" size=\"mini\" @click=\"showAssignRole(scope.row)\" title=\"AssignRole\" />\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n    \r\n    <!-- 分页组件 -->\r\n    <el-pagination :current-page=\"page\" :total=\"total\" :page-size=\"limit\" style=\"padding: 30px 0; text-align: center;\"\r\n      layout=\"total, prev, pager, next, jumper\" @current-change=\"fetchData\" />\r\n\r\n    <el-dialog title=\"Add/Edit\" :visible.sync=\"dialogVisible\" width=\"40%\">\r\n      <el-form ref=\"dataForm\" :model=\"sysUser\" label-width=\"100px\" size=\"small\" style=\"padding-right: 40px;\">\r\n        <el-form-item label=\"User Name\" prop=\"username\">\r\n          <el-input v-model=\"sysUser.username\" />\r\n        </el-form-item>\r\n        <el-form-item v-if=\"!sysUser.id\" label=\"Password\" prop=\"password\">\r\n          <el-input v-model=\"sysUser.password\" type=\"password\" />\r\n        </el-form-item>\r\n        <el-form-item label=\"Name\" prop=\"name\">\r\n          <el-input v-model=\"sysUser.name\" />\r\n        </el-form-item>\r\n        <el-form-item label=\"Phone Num\" prop=\"phone\">\r\n          <el-input v-model=\"sysUser.phone\" />\r\n        </el-form-item>\r\n      </el-form>\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"dialogVisible = false\" size=\"small\" icon=\"el-icon-refresh-right\">Cancel</el-button>\r\n        <el-button type=\"primary\" icon=\"el-icon-check\" @click=\"saveOrUpdate()\" size=\"small\">Confirm</el-button>\r\n      </span>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n<script>\r\n//import customized js\r\nimport api from '@/api/system/user.js'\r\nimport roleApi from '@/api/system/role.js'\r\n\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      listLoading: false,//loading icon\r\n      list: [], //role list\r\n      total: 0,\r\n      page: 1,\r\n      limit: 10,\r\n      searchObj: {},\r\n\r\n      createTimes: [],\r\n\r\n      dialogVisible: false,//dialog default false\r\n\r\n      sysUser: {},//封装添加表单数据\r\n      // selectValue: []//selection data list\r\n\r\n      dialogRoleVisible: false,\r\n      allRoles: [], // 所有角色列表\r\n      userRoleIds: [], // 用户的角色ID的列表\r\n      isIndeterminate: false, // 是否是不确定的\r\n      checkAll: false // 是否全选\r\n    }\r\n  },\r\n  created() {\r\n    this.fetchData()\r\n  },\r\n  methods: {\r\n    //change user status\r\n    switchStatus(row) {\r\n      row.status = row.status === 1 ? 0 : 1\r\n      api.updateStatus(row.id, row.status).then(response => {\r\n        if (response.code) {\r\n          this.$message.success(response.message || 'Status Updated!')\r\n          this.fetchData()\r\n        }\r\n      })\r\n    },\r\n    removeDataById(id) {\r\n      this.$confirm('Confirm deleting User?', 'Alert', {\r\n        confirmButtonText: 'Yes, I confirm',\r\n        cancelButtonText: 'Cancel',\r\n        type: 'warning'\r\n      }).then(() => { // promise\r\n        console.log(id)\r\n        api.removeId(id)\r\n          .then(response => {\r\n            this.$message({\r\n              type: 'success',\r\n              message: 'Deleted Successfully!'\r\n            });\r\n            this.fetchData()\r\n          });\r\n\r\n      })\r\n    },\r\n    edit(id) {\r\n      this.dialogVisible = true\r\n      api.getUserId(id)\r\n        .then(response => {\r\n          this.sysUser = response.data\r\n        })\r\n    },\r\n    //add or update user\r\n    saveOrUpdate() {\r\n      if (!this.sysUser.id) {\r\n        this.save()\r\n      } else {\r\n        this.update()\r\n      }\r\n    },\r\n    update() {\r\n      api.update(this.sysUser)\r\n        .then(response => {\r\n          //提示\r\n          this.$message.success('Successfully Updated')\r\n          //close dialog\r\n          this.dialogVisible = false\r\n          //refresh\r\n          this.fetchData()\r\n        })\r\n    },\r\n    save() {\r\n      api.saveUser(this.sysUser)\r\n        .then(response => {\r\n          //提示\r\n          this.$message.success('Successfully Added')\r\n          //close dialog\r\n          this.dialogVisible = false\r\n          //refresh\r\n          this.fetchData()\r\n        })\r\n    },\r\n    //add dialog\r\n    add() {\r\n      this.dialogVisible = true\r\n      this.sysUser = {}\r\n    },\r\n    //list\r\n    fetchData(page = 1) {\r\n      this.page = page\r\n      if (this.createTimes != '' && this.createTimes.length == 2) {\r\n        this.searchObj.createTimeBegin = this.createTimes[0]\r\n        this.searchObj.createTimeEnd = this.createTimes[1]\r\n      }\r\n      api.getPageList(this.page, this.limit, this.searchObj)\r\n        .then(response => {\r\n          this.list = response.data.records\r\n          this.total = response.data.total\r\n        })\r\n    },\r\n    resetData() {\r\n      console.log('Reset Form')\r\n      this.searchObj = {}\r\n      this.createTimes = []\r\n      this.fetchData()\r\n    },\r\n    //展示分配角色\r\n    showAssignRole (row) {\r\n      this.sysUser = row\r\n      this.dialogRoleVisible = true\r\n       roleApi.getRolesByUserId(row.id).then(response => {\r\n        this.allRoles = response.data.allRoles\r\n        this.userRoleIds = response.data.userRoleIds\r\n        this.checkAll = this.userRoleIds.length===this.allRoles.length\r\n        this.isIndeterminate = this.userRoleIds.length>0 && this.userRoleIds.length<this.allRoles.length\r\n      })\r\n    },\r\n\r\n    /*\r\n    全选勾选状态发生改变的监听\r\n    */\r\n    handleCheckAllChange (value) {// value 当前勾选状态true/false\r\n      // 如果当前全选, userRoleIds就是所有角色id的数组, 否则是空数组\r\n      this.userRoleIds = value ? this.allRoles.map(item => item.id) : []\r\n      // 如果当前不是全选也不全不选时, 指定为false\r\n      this.isIndeterminate = false\r\n    },\r\n\r\n    /*\r\n    角色列表选中项发生改变的监听\r\n    */\r\n    handleCheckedChange (value) {\r\n      const {userRoleIds, allRoles} = this\r\n      this.checkAll = userRoleIds.length === allRoles.length && allRoles.length>0\r\n      this.isIndeterminate = userRoleIds.length>0 && userRoleIds.length<allRoles.length\r\n    },\r\n\r\n    //分配角色\r\n    assignRole () {\r\n      let assginRoleVo = {\r\n        userId: this.sysUser.id,\r\n        roleIdList: this.userRoleIds\r\n      }\r\n      roleApi.assignRoles(assginRoleVo).then(response => {\r\n        this.$message.success(response.message || '分配角色成功')\r\n        this.dialogRoleVisible = false\r\n        this.fetchData(this.page)\r\n      })\r\n    },\r\n    \r\n  \r\n  }\r\n\r\n}\r\n</script>"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0GA;AACA,OAAAA,GAAA;AACA,OAAAC,OAAA;AAGA;EACAC,IAAA,WAAAA,KAAA;IACA;MACAC,WAAA;MAAA;MACAC,IAAA;MAAA;MACAC,KAAA;MACAC,IAAA;MACAC,KAAA;MACAC,SAAA;MAEAC,WAAA;MAEAC,aAAA;MAAA;;MAEAC,OAAA;MAAA;MACA;;MAEAC,iBAAA;MACAC,QAAA;MAAA;MACAC,WAAA;MAAA;MACAC,eAAA;MAAA;MACAC,QAAA;IACA;EACA;EACAC,OAAA,WAAAA,QAAA;IACA,KAAAC,SAAA;EACA;EACAC,OAAA;IACA;IACAC,YAAA,WAAAA,aAAAC,GAAA;MAAA,IAAAC,KAAA;MACAD,GAAA,CAAAE,MAAA,GAAAF,GAAA,CAAAE,MAAA;MACAvB,GAAA,CAAAwB,YAAA,CAAAH,GAAA,CAAAI,EAAA,EAAAJ,GAAA,CAAAE,MAAA,EAAAG,IAAA,WAAAC,QAAA;QACA,IAAAA,QAAA,CAAAC,IAAA;UACAN,KAAA,CAAAO,QAAA,CAAAC,OAAA,CAAAH,QAAA,CAAAI,OAAA;UACAT,KAAA,CAAAJ,SAAA;QACA;MACA;IACA;IACAc,cAAA,WAAAA,eAAAP,EAAA;MAAA,IAAAQ,MAAA;MACA,KAAAC,QAAA;QACAC,iBAAA;QACAC,gBAAA;QACAC,IAAA;MACA,GAAAX,IAAA;QAAA;QACAY,OAAA,CAAAC,GAAA,CAAAd,EAAA;QACAzB,GAAA,CAAAwC,QAAA,CAAAf,EAAA,EACAC,IAAA,WAAAC,QAAA;UACAM,MAAA,CAAAJ,QAAA;YACAQ,IAAA;YACAN,OAAA;UACA;UACAE,MAAA,CAAAf,SAAA;QACA;MAEA;IACA;IACAuB,IAAA,WAAAA,KAAAhB,EAAA;MAAA,IAAAiB,MAAA;MACA,KAAAhC,aAAA;MACAV,GAAA,CAAA2C,SAAA,CAAAlB,EAAA,EACAC,IAAA,WAAAC,QAAA;QACAe,MAAA,CAAA/B,OAAA,GAAAgB,QAAA,CAAAzB,IAAA;MACA;IACA;IACA;IACA0C,YAAA,WAAAA,aAAA;MACA,UAAAjC,OAAA,CAAAc,EAAA;QACA,KAAAoB,IAAA;MACA;QACA,KAAAC,MAAA;MACA;IACA;IACAA,MAAA,WAAAA,OAAA;MAAA,IAAAC,MAAA;MACA/C,GAAA,CAAA8C,MAAA,MAAAnC,OAAA,EACAe,IAAA,WAAAC,QAAA;QACA;QACAoB,MAAA,CAAAlB,QAAA,CAAAC,OAAA;QACA;QACAiB,MAAA,CAAArC,aAAA;QACA;QACAqC,MAAA,CAAA7B,SAAA;MACA;IACA;IACA2B,IAAA,WAAAA,KAAA;MAAA,IAAAG,MAAA;MACAhD,GAAA,CAAAiD,QAAA,MAAAtC,OAAA,EACAe,IAAA,WAAAC,QAAA;QACA;QACAqB,MAAA,CAAAnB,QAAA,CAAAC,OAAA;QACA;QACAkB,MAAA,CAAAtC,aAAA;QACA;QACAsC,MAAA,CAAA9B,SAAA;MACA;IACA;IACA;IACAgC,GAAA,WAAAA,IAAA;MACA,KAAAxC,aAAA;MACA,KAAAC,OAAA;IACA;IACA;IACAO,SAAA,WAAAA,UAAA;MAAA,IAAAiC,MAAA;MAAA,IAAA7C,IAAA,GAAA8C,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA;MACA,KAAA9C,IAAA,GAAAA,IAAA;MACA,SAAAG,WAAA,eAAAA,WAAA,CAAA4C,MAAA;QACA,KAAA7C,SAAA,CAAA+C,eAAA,QAAA9C,WAAA;QACA,KAAAD,SAAA,CAAAgD,aAAA,QAAA/C,WAAA;MACA;MACAT,GAAA,CAAAyD,WAAA,MAAAnD,IAAA,OAAAC,KAAA,OAAAC,SAAA,EACAkB,IAAA,WAAAC,QAAA;QACAwB,MAAA,CAAA/C,IAAA,GAAAuB,QAAA,CAAAzB,IAAA,CAAAwD,OAAA;QACAP,MAAA,CAAA9C,KAAA,GAAAsB,QAAA,CAAAzB,IAAA,CAAAG,KAAA;MACA;IACA;IACAsD,SAAA,WAAAA,UAAA;MACArB,OAAA,CAAAC,GAAA;MACA,KAAA/B,SAAA;MACA,KAAAC,WAAA;MACA,KAAAS,SAAA;IACA;IACA;IACA0C,cAAA,WAAAA,eAAAvC,GAAA;MAAA,IAAAwC,MAAA;MACA,KAAAlD,OAAA,GAAAU,GAAA;MACA,KAAAT,iBAAA;MACAX,OAAA,CAAA6D,gBAAA,CAAAzC,GAAA,CAAAI,EAAA,EAAAC,IAAA,WAAAC,QAAA;QACAkC,MAAA,CAAAhD,QAAA,GAAAc,QAAA,CAAAzB,IAAA,CAAAW,QAAA;QACAgD,MAAA,CAAA/C,WAAA,GAAAa,QAAA,CAAAzB,IAAA,CAAAY,WAAA;QACA+C,MAAA,CAAA7C,QAAA,GAAA6C,MAAA,CAAA/C,WAAA,CAAAuC,MAAA,KAAAQ,MAAA,CAAAhD,QAAA,CAAAwC,MAAA;QACAQ,MAAA,CAAA9C,eAAA,GAAA8C,MAAA,CAAA/C,WAAA,CAAAuC,MAAA,QAAAQ,MAAA,CAAA/C,WAAA,CAAAuC,MAAA,GAAAQ,MAAA,CAAAhD,QAAA,CAAAwC,MAAA;MACA;IACA;IAEA;AACA;AACA;IACAU,oBAAA,WAAAA,qBAAAC,KAAA;MAAA;MACA;MACA,KAAAlD,WAAA,GAAAkD,KAAA,QAAAnD,QAAA,CAAAoD,GAAA,WAAAC,IAAA;QAAA,OAAAA,IAAA,CAAAzC,EAAA;MAAA;MACA;MACA,KAAAV,eAAA;IACA;IAEA;AACA;AACA;IACAoD,mBAAA,WAAAA,oBAAAH,KAAA;MACA,IAAAlD,WAAA,QAAAA,WAAA;QAAAD,QAAA,QAAAA,QAAA;MACA,KAAAG,QAAA,GAAAF,WAAA,CAAAuC,MAAA,KAAAxC,QAAA,CAAAwC,MAAA,IAAAxC,QAAA,CAAAwC,MAAA;MACA,KAAAtC,eAAA,GAAAD,WAAA,CAAAuC,MAAA,QAAAvC,WAAA,CAAAuC,MAAA,GAAAxC,QAAA,CAAAwC,MAAA;IACA;IAEA;IACAe,UAAA,WAAAA,WAAA;MAAA,IAAAC,MAAA;MACA,IAAAC,YAAA;QACAC,MAAA,OAAA5D,OAAA,CAAAc,EAAA;QACA+C,UAAA,OAAA1D;MACA;MACAb,OAAA,CAAAwE,WAAA,CAAAH,YAAA,EAAA5C,IAAA,WAAAC,QAAA;QACA0C,MAAA,CAAAxC,QAAA,CAAAC,OAAA,CAAAH,QAAA,CAAAI,OAAA;QACAsC,MAAA,CAAAzD,iBAAA;QACAyD,MAAA,CAAAnD,SAAA,CAAAmD,MAAA,CAAA/D,IAAA;MACA;IACA;EAGA;AAEA"}]}