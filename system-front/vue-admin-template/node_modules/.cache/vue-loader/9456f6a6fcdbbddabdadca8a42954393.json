{"remainingRequest":"C:\\Users\\troybaba\\Desktop\\projectClone\\system-front\\vue-admin-template\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\troybaba\\Desktop\\projectClone\\system-front\\vue-admin-template\\src\\views\\system\\sysUser\\list.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\troybaba\\Desktop\\projectClone\\system-front\\vue-admin-template\\src\\views\\system\\sysUser\\list.vue","mtime":1681853804049},{"path":"C:\\Users\\troybaba\\Desktop\\projectClone\\system-front\\vue-admin-template\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1681853795791},{"path":"C:\\Users\\troybaba\\Desktop\\projectClone\\system-front\\vue-admin-template\\node_modules\\babel-loader\\lib\\index.js","mtime":1681853795091},{"path":"C:\\Users\\troybaba\\Desktop\\projectClone\\system-front\\vue-admin-template\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1681853795791},{"path":"C:\\Users\\troybaba\\Desktop\\projectClone\\system-front\\vue-admin-template\\node_modules\\vue-loader\\lib\\index.js","mtime":1681853803451}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQovL2ltcG9ydCBjdXN0b21pemVkIGpzDQppbXBvcnQgYXBpIGZyb20gJ0AvYXBpL3N5c3RlbS91c2VyLmpzJw0KaW1wb3J0IHJvbGVBcGkgZnJvbSAnQC9hcGkvc3lzdGVtL3JvbGUuanMnDQoNCg0KZXhwb3J0IGRlZmF1bHQgew0KICBkYXRhKCkgew0KICAgIHJldHVybiB7DQogICAgICBsaXN0TG9hZGluZzogZmFsc2UsLy9sb2FkaW5nIGljb24NCiAgICAgIGxpc3Q6IFtdLCAvL3JvbGUgbGlzdA0KICAgICAgdG90YWw6IDAsDQogICAgICBwYWdlOiAxLA0KICAgICAgbGltaXQ6IDEwLA0KICAgICAgc2VhcmNoT2JqOiB7fSwNCg0KICAgICAgY3JlYXRlVGltZXM6IFtdLA0KDQogICAgICBkaWFsb2dWaXNpYmxlOiBmYWxzZSwvL2RpYWxvZyBkZWZhdWx0IGZhbHNlDQoNCiAgICAgIHN5c1VzZXI6IHt9LC8v5bCB6KOF5re75Yqg6KGo5Y2V5pWw5o2uDQogICAgICAvLyBzZWxlY3RWYWx1ZTogW10vL3NlbGVjdGlvbiBkYXRhIGxpc3QNCg0KICAgICAgZGlhbG9nUm9sZVZpc2libGU6IGZhbHNlLA0KICAgICAgYWxsUm9sZXM6IFtdLCAvLyDmiYDmnInop5LoibLliJfooagNCiAgICAgIHVzZXJSb2xlSWRzOiBbXSwgLy8g55So5oi355qE6KeS6ImySUTnmoTliJfooagNCiAgICAgIGlzSW5kZXRlcm1pbmF0ZTogZmFsc2UsIC8vIOaYr+WQpuaYr+S4jeehruWumueahA0KICAgICAgY2hlY2tBbGw6IGZhbHNlIC8vIOaYr+WQpuWFqOmAiQ0KICAgIH0NCiAgfSwNCiAgY3JlYXRlZCgpIHsNCiAgICB0aGlzLmZldGNoRGF0YSgpDQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICAvL2NoYW5nZSB1c2VyIHN0YXR1cw0KICAgIHN3aXRjaFN0YXR1cyhyb3cpIHsNCiAgICAgIHJvdy5zdGF0dXMgPSByb3cuc3RhdHVzID09PSAxID8gMCA6IDENCiAgICAgIGFwaS51cGRhdGVTdGF0dXMocm93LmlkLCByb3cuc3RhdHVzKS50aGVuKHJlc3BvbnNlID0+IHsNCiAgICAgICAgaWYgKHJlc3BvbnNlLmNvZGUpIHsNCiAgICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MocmVzcG9uc2UubWVzc2FnZSB8fCAnU3RhdHVzIFVwZGF0ZWQhJykNCiAgICAgICAgICB0aGlzLmZldGNoRGF0YSgpDQogICAgICAgIH0NCiAgICAgIH0pDQogICAgfSwNCiAgICByZW1vdmVEYXRhQnlJZChpZCkgew0KICAgICAgdGhpcy4kY29uZmlybSgnQ29uZmlybSBkZWxldGluZyBVc2VyPycsICdBbGVydCcsIHsNCiAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICdZZXMsIEkgY29uZmlybScsDQogICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICdDYW5jZWwnLA0KICAgICAgICB0eXBlOiAnd2FybmluZycNCiAgICAgIH0pLnRoZW4oKCkgPT4geyAvLyBwcm9taXNlDQogICAgICAgIGNvbnNvbGUubG9nKGlkKQ0KICAgICAgICBhcGkucmVtb3ZlSWQoaWQpDQogICAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gew0KICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSh7DQogICAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJywNCiAgICAgICAgICAgICAgbWVzc2FnZTogJ0RlbGV0ZWQgU3VjY2Vzc2Z1bGx5IScNCiAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgdGhpcy5mZXRjaERhdGEoKQ0KICAgICAgICAgIH0pOw0KDQogICAgICB9KQ0KICAgIH0sDQogICAgZWRpdChpZCkgew0KICAgICAgdGhpcy5kaWFsb2dWaXNpYmxlID0gdHJ1ZQ0KICAgICAgYXBpLmdldFVzZXJJZChpZCkNCiAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gew0KICAgICAgICAgIHRoaXMuc3lzVXNlciA9IHJlc3BvbnNlLmRhdGENCiAgICAgICAgfSkNCiAgICB9LA0KICAgIC8vYWRkIG9yIHVwZGF0ZSB1c2VyDQogICAgc2F2ZU9yVXBkYXRlKCkgew0KICAgICAgaWYgKCF0aGlzLnN5c1VzZXIuaWQpIHsNCiAgICAgICAgdGhpcy5zYXZlKCkNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIHRoaXMudXBkYXRlKCkNCiAgICAgIH0NCiAgICB9LA0KICAgIHVwZGF0ZSgpIHsNCiAgICAgIGFwaS51cGRhdGUodGhpcy5zeXNVc2VyKQ0KICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7DQogICAgICAgICAgLy/mj5DnpLoNCiAgICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoJ1N1Y2Nlc3NmdWxseSBVcGRhdGVkJykNCiAgICAgICAgICAvL2Nsb3NlIGRpYWxvZw0KICAgICAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9IGZhbHNlDQogICAgICAgICAgLy9yZWZyZXNoDQogICAgICAgICAgdGhpcy5mZXRjaERhdGEoKQ0KICAgICAgICB9KQ0KICAgIH0sDQogICAgc2F2ZSgpIHsNCiAgICAgIGFwaS5zYXZlVXNlcih0aGlzLnN5c1VzZXIpDQogICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsNCiAgICAgICAgICAvL+aPkOekug0KICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2VzcygnU3VjY2Vzc2Z1bGx5IEFkZGVkJykNCiAgICAgICAgICAvL2Nsb3NlIGRpYWxvZw0KICAgICAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9IGZhbHNlDQogICAgICAgICAgLy9yZWZyZXNoDQogICAgICAgICAgdGhpcy5mZXRjaERhdGEoKQ0KICAgICAgICB9KQ0KICAgIH0sDQogICAgLy9hZGQgZGlhbG9nDQogICAgYWRkKCkgew0KICAgICAgdGhpcy5kaWFsb2dWaXNpYmxlID0gdHJ1ZQ0KICAgICAgdGhpcy5zeXNVc2VyID0ge30NCiAgICB9LA0KICAgIC8vbGlzdA0KICAgIGZldGNoRGF0YShwYWdlID0gMSkgew0KICAgICAgdGhpcy5wYWdlID0gcGFnZQ0KICAgICAgaWYgKHRoaXMuY3JlYXRlVGltZXMgIT0gJycgJiYgdGhpcy5jcmVhdGVUaW1lcy5sZW5ndGggPT0gMikgew0KICAgICAgICB0aGlzLnNlYXJjaE9iai5jcmVhdGVUaW1lQmVnaW4gPSB0aGlzLmNyZWF0ZVRpbWVzWzBdDQogICAgICAgIHRoaXMuc2VhcmNoT2JqLmNyZWF0ZVRpbWVFbmQgPSB0aGlzLmNyZWF0ZVRpbWVzWzFdDQogICAgICB9DQogICAgICBhcGkuZ2V0UGFnZUxpc3QodGhpcy5wYWdlLCB0aGlzLmxpbWl0LCB0aGlzLnNlYXJjaE9iaikNCiAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gew0KICAgICAgICAgIHRoaXMubGlzdCA9IHJlc3BvbnNlLmRhdGEucmVjb3Jkcw0KICAgICAgICAgIHRoaXMudG90YWwgPSByZXNwb25zZS5kYXRhLnRvdGFsDQogICAgICAgIH0pDQogICAgfSwNCiAgICByZXNldERhdGEoKSB7DQogICAgICBjb25zb2xlLmxvZygnUmVzZXQgRm9ybScpDQogICAgICB0aGlzLnNlYXJjaE9iaiA9IHt9DQogICAgICB0aGlzLmNyZWF0ZVRpbWVzID0gW10NCiAgICAgIHRoaXMuZmV0Y2hEYXRhKCkNCiAgICB9LA0KICAgIC8v5bGV56S65YiG6YWN6KeS6ImyDQogICAgc2hvd0Fzc2lnblJvbGUgKHJvdykgew0KICAgICAgdGhpcy5zeXNVc2VyID0gcm93DQogICAgICB0aGlzLmRpYWxvZ1JvbGVWaXNpYmxlID0gdHJ1ZQ0KICAgICAgIHJvbGVBcGkuZ2V0Um9sZXNCeVVzZXJJZChyb3cuaWQpLnRoZW4ocmVzcG9uc2UgPT4gew0KICAgICAgICB0aGlzLmFsbFJvbGVzID0gcmVzcG9uc2UuZGF0YS5hbGxSb2xlcw0KICAgICAgICB0aGlzLnVzZXJSb2xlSWRzID0gcmVzcG9uc2UuZGF0YS51c2VyUm9sZUlkcw0KICAgICAgICB0aGlzLmNoZWNrQWxsID0gdGhpcy51c2VyUm9sZUlkcy5sZW5ndGg9PT10aGlzLmFsbFJvbGVzLmxlbmd0aA0KICAgICAgICB0aGlzLmlzSW5kZXRlcm1pbmF0ZSA9IHRoaXMudXNlclJvbGVJZHMubGVuZ3RoPjAgJiYgdGhpcy51c2VyUm9sZUlkcy5sZW5ndGg8dGhpcy5hbGxSb2xlcy5sZW5ndGgNCiAgICAgIH0pDQogICAgfSwNCg0KICAgIC8qDQogICAg5YWo6YCJ5Yu+6YCJ54q25oCB5Y+R55Sf5pS55Y+Y55qE55uR5ZCsDQogICAgKi8NCiAgICBoYW5kbGVDaGVja0FsbENoYW5nZSAodmFsdWUpIHsvLyB2YWx1ZSDlvZPliY3li77pgInnirbmgIF0cnVlL2ZhbHNlDQogICAgICAvLyDlpoLmnpzlvZPliY3lhajpgIksIHVzZXJSb2xlSWRz5bCx5piv5omA5pyJ6KeS6ImyaWTnmoTmlbDnu4QsIOWQpuWImeaYr+epuuaVsOe7hA0KICAgICAgdGhpcy51c2VyUm9sZUlkcyA9IHZhbHVlID8gdGhpcy5hbGxSb2xlcy5tYXAoaXRlbSA9PiBpdGVtLmlkKSA6IFtdDQogICAgICAvLyDlpoLmnpzlvZPliY3kuI3mmK/lhajpgInkuZ/kuI3lhajkuI3pgInml7YsIOaMh+WumuS4umZhbHNlDQogICAgICB0aGlzLmlzSW5kZXRlcm1pbmF0ZSA9IGZhbHNlDQogICAgfSwNCg0KICAgIC8qDQogICAg6KeS6Imy5YiX6KGo6YCJ5Lit6aG55Y+R55Sf5pS55Y+Y55qE55uR5ZCsDQogICAgKi8NCiAgICBoYW5kbGVDaGVja2VkQ2hhbmdlICh2YWx1ZSkgew0KICAgICAgY29uc3Qge3VzZXJSb2xlSWRzLCBhbGxSb2xlc30gPSB0aGlzDQogICAgICB0aGlzLmNoZWNrQWxsID0gdXNlclJvbGVJZHMubGVuZ3RoID09PSBhbGxSb2xlcy5sZW5ndGggJiYgYWxsUm9sZXMubGVuZ3RoPjANCiAgICAgIHRoaXMuaXNJbmRldGVybWluYXRlID0gdXNlclJvbGVJZHMubGVuZ3RoPjAgJiYgdXNlclJvbGVJZHMubGVuZ3RoPGFsbFJvbGVzLmxlbmd0aA0KICAgIH0sDQoNCiAgICAvL+WIhumFjeinkuiJsg0KICAgIGFzc2lnblJvbGUgKCkgew0KICAgICAgbGV0IGFzc2dpblJvbGVWbyA9IHsNCiAgICAgICAgdXNlcklkOiB0aGlzLnN5c1VzZXIuaWQsDQogICAgICAgIHJvbGVJZExpc3Q6IHRoaXMudXNlclJvbGVJZHMNCiAgICAgIH0NCiAgICAgIHJvbGVBcGkuYXNzaWduUm9sZXMoYXNzZ2luUm9sZVZvKS50aGVuKHJlc3BvbnNlID0+IHsNCiAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKHJlc3BvbnNlLm1lc3NhZ2UgfHwgJ+WIhumFjeinkuiJsuaIkOWKnycpDQogICAgICAgIHRoaXMuZGlhbG9nUm9sZVZpc2libGUgPSBmYWxzZQ0KICAgICAgICB0aGlzLmZldGNoRGF0YSh0aGlzLnBhZ2UpDQogICAgICB9KQ0KICAgIH0sDQogICAgDQogIA0KICB9DQoNCn0NCg=="},{"version":3,"sources":["list.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0GA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA","file":"list.vue","sourceRoot":"src/views/system/sysUser","sourcesContent":["<template>\r\n  <div id=\"app-container\">\r\n    <div class=\"search-div\">\r\n      <el-form label-width=\"70px\" size=\"small\">\r\n        <el-row>\r\n          <el-col :span=\"8\">\r\n            <el-form-item label=\"Keywrod\">\r\n              <el-input style=\"width: 95%\" v-model=\"searchObj.keyword\" placeholder=\"Username/Name/Phone\"></el-input>\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-col :span=\"8\">\r\n            <el-form-item label=\"Time\">\r\n              <el-date-picker v-model=\"createTimes\" type=\"datetimerange\" range-separator=\"To\"\r\n                start-placeholder=\"Start Time\" end-placeholder=\"End Time\" value-format=\"yyyy-MM-dd HH:mm:ss\"\r\n                style=\"margin-right: 20px;width: 100%;\" />\r\n            </el-form-item>\r\n          </el-col>\r\n        </el-row>\r\n        <el-row style=\"display:flex\">\r\n          <el-button type=\"primary\" icon=\"el-icon-search\" size=\"mini\" @click=\"fetchData()\">Search</el-button>\r\n          <el-button icon=\"el-icon-refresh\" size=\"mini\" @click=\"resetData\">Reset</el-button>\r\n        </el-row>\r\n      </el-form>\r\n    </div>\r\n\r\n    <el-dialog title=\"AssignRole\" :visible.sync=\"dialogRoleVisible\">\r\n      <el-form label-width=\"100px\">\r\n        <el-form-item label=\"UserName\">\r\n          <el-input disabled :value=\"sysUser.username\"></el-input>\r\n        </el-form-item>\r\n\r\n        <el-form-item label=\"Role List\">\r\n          <el-checkbox :indeterminate=\"isIndeterminate\" v-model=\"checkAll\" @change=\"handleCheckAllChange\">SelectAll</el-checkbox>\r\n          <div style=\"margin: 15px 0;\"></div>\r\n          <el-checkbox-group v-model=\"userRoleIds\" @change=\"handleCheckedChange\">\r\n            <el-checkbox v-for=\"role in allRoles\" :key=\"role.id\" :label=\"role.id\">{{role.roleName}}</el-checkbox>\r\n          </el-checkbox-group>\r\n        </el-form-item>\r\n      </el-form>\r\n      <div slot=\"footer\">\r\n        <el-button type=\"primary\" @click=\"assignRole\" size=\"small\">Save</el-button>\r\n        <el-button @click=\"dialogRoleVisible = false\" size=\"small\">Canacel</el-button>\r\n      </div>\r\n    </el-dialog>\r\n    <!-- 工具条 -->\r\n    <div class=\"tools-div\">\r\n      <el-button type=\"success\" icon=\"el-icon-plus\" size=\"mini\" @click=\"add\">Add</el-button>\r\n    </div>\r\n\r\n    <!-- 列表 -->\r\n    <el-table v-loading=\"listLoading\" :data=\"list\" stripe border style=\"width: 100%;margin-top: 10px;\">\r\n\r\n      <el-table-column label=\"Index\" width=\"70\" align=\"center\">\r\n        <template slot-scope=\"scope\">\r\n          {{ (page - 1) * limit + scope.$index + 1 }}\r\n        </template>\r\n      </el-table-column>\r\n\r\n      <el-table-column prop=\"username\" label=\"User Name\" width=\"180\" />\r\n      <el-table-column prop=\"name\" label=\"Name\" width=\"110\" />\r\n      <el-table-column prop=\"phone\" label=\"Phone Num\" />\r\n      <el-table-column label=\"Status\" width=\"80\">\r\n        <template slot-scope=\"scope\">\r\n          <el-switch v-model=\"scope.row.status === 1\" @change=\"switchStatus(scope.row)\">\r\n          </el-switch>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column prop=\"createTime\" label=\"createTime\" />\r\n\r\n      <el-table-column label=\"Action\" align=\"center\" fixed=\"right\">\r\n        <template slot-scope=\"scope\">\r\n          <el-button type=\"primary\" icon=\"el-icon-edit\" size=\"mini\" @click=\"edit(scope.row.id)\" title=\"Edit\" />\r\n          <el-button type=\"danger\" icon=\"el-icon-delete\" size=\"mini\" @click=\"removeDataById(scope.row.id)\"\r\n            title=\"Delete\" />\r\n          <el-button type=\"warning\" icon=\"el-icon-baseball\" size=\"mini\" @click=\"showAssignRole(scope.row)\" title=\"AssignRole\" />\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n    \r\n    <!-- 分页组件 -->\r\n    <el-pagination :current-page=\"page\" :total=\"total\" :page-size=\"limit\" style=\"padding: 30px 0; text-align: center;\"\r\n      layout=\"total, prev, pager, next, jumper\" @current-change=\"fetchData\" />\r\n\r\n    <el-dialog title=\"Add/Edit\" :visible.sync=\"dialogVisible\" width=\"40%\">\r\n      <el-form ref=\"dataForm\" :model=\"sysUser\" label-width=\"100px\" size=\"small\" style=\"padding-right: 40px;\">\r\n        <el-form-item label=\"User Name\" prop=\"username\">\r\n          <el-input v-model=\"sysUser.username\" />\r\n        </el-form-item>\r\n        <el-form-item v-if=\"!sysUser.id\" label=\"Password\" prop=\"password\">\r\n          <el-input v-model=\"sysUser.password\" type=\"password\" />\r\n        </el-form-item>\r\n        <el-form-item label=\"Name\" prop=\"name\">\r\n          <el-input v-model=\"sysUser.name\" />\r\n        </el-form-item>\r\n        <el-form-item label=\"Phone Num\" prop=\"phone\">\r\n          <el-input v-model=\"sysUser.phone\" />\r\n        </el-form-item>\r\n      </el-form>\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"dialogVisible = false\" size=\"small\" icon=\"el-icon-refresh-right\">Cancel</el-button>\r\n        <el-button type=\"primary\" icon=\"el-icon-check\" @click=\"saveOrUpdate()\" size=\"small\">Confirm</el-button>\r\n      </span>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n<script>\r\n//import customized js\r\nimport api from '@/api/system/user.js'\r\nimport roleApi from '@/api/system/role.js'\r\n\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      listLoading: false,//loading icon\r\n      list: [], //role list\r\n      total: 0,\r\n      page: 1,\r\n      limit: 10,\r\n      searchObj: {},\r\n\r\n      createTimes: [],\r\n\r\n      dialogVisible: false,//dialog default false\r\n\r\n      sysUser: {},//封装添加表单数据\r\n      // selectValue: []//selection data list\r\n\r\n      dialogRoleVisible: false,\r\n      allRoles: [], // 所有角色列表\r\n      userRoleIds: [], // 用户的角色ID的列表\r\n      isIndeterminate: false, // 是否是不确定的\r\n      checkAll: false // 是否全选\r\n    }\r\n  },\r\n  created() {\r\n    this.fetchData()\r\n  },\r\n  methods: {\r\n    //change user status\r\n    switchStatus(row) {\r\n      row.status = row.status === 1 ? 0 : 1\r\n      api.updateStatus(row.id, row.status).then(response => {\r\n        if (response.code) {\r\n          this.$message.success(response.message || 'Status Updated!')\r\n          this.fetchData()\r\n        }\r\n      })\r\n    },\r\n    removeDataById(id) {\r\n      this.$confirm('Confirm deleting User?', 'Alert', {\r\n        confirmButtonText: 'Yes, I confirm',\r\n        cancelButtonText: 'Cancel',\r\n        type: 'warning'\r\n      }).then(() => { // promise\r\n        console.log(id)\r\n        api.removeId(id)\r\n          .then(response => {\r\n            this.$message({\r\n              type: 'success',\r\n              message: 'Deleted Successfully!'\r\n            });\r\n            this.fetchData()\r\n          });\r\n\r\n      })\r\n    },\r\n    edit(id) {\r\n      this.dialogVisible = true\r\n      api.getUserId(id)\r\n        .then(response => {\r\n          this.sysUser = response.data\r\n        })\r\n    },\r\n    //add or update user\r\n    saveOrUpdate() {\r\n      if (!this.sysUser.id) {\r\n        this.save()\r\n      } else {\r\n        this.update()\r\n      }\r\n    },\r\n    update() {\r\n      api.update(this.sysUser)\r\n        .then(response => {\r\n          //提示\r\n          this.$message.success('Successfully Updated')\r\n          //close dialog\r\n          this.dialogVisible = false\r\n          //refresh\r\n          this.fetchData()\r\n        })\r\n    },\r\n    save() {\r\n      api.saveUser(this.sysUser)\r\n        .then(response => {\r\n          //提示\r\n          this.$message.success('Successfully Added')\r\n          //close dialog\r\n          this.dialogVisible = false\r\n          //refresh\r\n          this.fetchData()\r\n        })\r\n    },\r\n    //add dialog\r\n    add() {\r\n      this.dialogVisible = true\r\n      this.sysUser = {}\r\n    },\r\n    //list\r\n    fetchData(page = 1) {\r\n      this.page = page\r\n      if (this.createTimes != '' && this.createTimes.length == 2) {\r\n        this.searchObj.createTimeBegin = this.createTimes[0]\r\n        this.searchObj.createTimeEnd = this.createTimes[1]\r\n      }\r\n      api.getPageList(this.page, this.limit, this.searchObj)\r\n        .then(response => {\r\n          this.list = response.data.records\r\n          this.total = response.data.total\r\n        })\r\n    },\r\n    resetData() {\r\n      console.log('Reset Form')\r\n      this.searchObj = {}\r\n      this.createTimes = []\r\n      this.fetchData()\r\n    },\r\n    //展示分配角色\r\n    showAssignRole (row) {\r\n      this.sysUser = row\r\n      this.dialogRoleVisible = true\r\n       roleApi.getRolesByUserId(row.id).then(response => {\r\n        this.allRoles = response.data.allRoles\r\n        this.userRoleIds = response.data.userRoleIds\r\n        this.checkAll = this.userRoleIds.length===this.allRoles.length\r\n        this.isIndeterminate = this.userRoleIds.length>0 && this.userRoleIds.length<this.allRoles.length\r\n      })\r\n    },\r\n\r\n    /*\r\n    全选勾选状态发生改变的监听\r\n    */\r\n    handleCheckAllChange (value) {// value 当前勾选状态true/false\r\n      // 如果当前全选, userRoleIds就是所有角色id的数组, 否则是空数组\r\n      this.userRoleIds = value ? this.allRoles.map(item => item.id) : []\r\n      // 如果当前不是全选也不全不选时, 指定为false\r\n      this.isIndeterminate = false\r\n    },\r\n\r\n    /*\r\n    角色列表选中项发生改变的监听\r\n    */\r\n    handleCheckedChange (value) {\r\n      const {userRoleIds, allRoles} = this\r\n      this.checkAll = userRoleIds.length === allRoles.length && allRoles.length>0\r\n      this.isIndeterminate = userRoleIds.length>0 && userRoleIds.length<allRoles.length\r\n    },\r\n\r\n    //分配角色\r\n    assignRole () {\r\n      let assginRoleVo = {\r\n        userId: this.sysUser.id,\r\n        roleIdList: this.userRoleIds\r\n      }\r\n      roleApi.assignRoles(assginRoleVo).then(response => {\r\n        this.$message.success(response.message || '分配角色成功')\r\n        this.dialogRoleVisible = false\r\n        this.fetchData(this.page)\r\n      })\r\n    },\r\n    \r\n  \r\n  }\r\n\r\n}\r\n</script>"]}]}